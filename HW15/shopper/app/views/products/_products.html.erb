<div class="col">
  <div class="card shadow-sm" style="width: 20rem;">
    <% if product.image.attached? %>
      <%= image_tag product.image.variant(:main), class: 'class="bd-placeholder-img card-img-top', height: 225, alt: product.name %>
      <% else %>
      <%= image_tag("no_image_item.jpeg", class: 'class="bd-placeholder-img card-img-top', height: 225, alt: 'Photo coming soon') %>
    <% end %>
    <div class="card-body">
      <p class="card-text"><%= link_to product.name, product %></p>
      <div class="d-flex justify-content-between align-items-center">
        <div class="btn-group">
        <%if current_user %>
          <%= render partial: 'products/product_cart_button', locals: { product: product, line_item: @line_items.find { |line_item| line_item.product_id == product.id } } %>
          
        <% else %>
          <%= link_to'Add to cart', new_user_session_path, class:"btn btn-sm btn-outline-secondary" %>
        <% end %>
        </div>
        <small class="text-muted"><%= number_to_currency(product.price) %></small>
      </div>
    </div>
  </div>
</div>

        